import{_ as P}from"./UiInput.vue.kXHa0los.js";import{_ as T}from"./NuxtLinkLocale.feuzMoYK.js";import{_ as U}from"./UiButton.vue.B7X74Jcv.js";import{d as I,j as q,A as E,k as z,l as A,z as D,P as w,p as h,u as F,a as G,w as O,c as r,b as y,t as o,f as l,r as s,q as d,T as j,n as $,B as W,i as u,e as c,F as b,D as x,g as H,h as J,_ as K}from"./entry.DlqHIhoZ.js";const Q={class:"LoginPage"},R=I({__name:"login",setup(se){const V=q(),k=E(),m=z();A({title:()=>m.t("pages.login.title")});const n=D(!1),t=w({email:"",password:""}),a=w({status:"",details:""}),v=h(()=>m.t(`pages.login.info.${a.status}`));async function L(){if(n.value)return!1;a.details="",a.status="";try{n.value=!0;const{error:e}=await V.auth.signInWithPassword(t);e?(a.details=e.message,a.status="error"):a.status="success"}catch(e){a.status="undefinedError",console.error("LOGIN_PAGE:ON_SUBMIT:",e)}finally{n.value=!1}}const C=h(()=>[[k[`--${a.status}-status`]]]),M=F(),N=G();return O(M,async e=>{e&&(await H(),await J(N("/"),{replace:!0}))},{immediate:!0}),(e,i)=>{var f,_;const g=P,S=T,B=U;return u(),r("div",Q,[y("form",{class:$(e.$style.wrapper),onSubmit:W(L,["prevent"])},[y("h3",null,o(e.$t("pages.login.subtitle")),1),l(g,{id:"login-email",modelValue:s(t).email,"onUpdate:modelValue":i[0]||(i[0]=p=>s(t).email=p),maxlength:"255",autocomplete:"email",required:"",type:"email",placeholder:e.$t("pages.login.email.placeholder"),title:e.$t("pages.login.email.title")},null,8,["modelValue","placeholder","title"]),l(g,{id:"login-password",modelValue:s(t).password,"onUpdate:modelValue":i[1]||(i[1]=p=>s(t).password=p),maxlength:"255",autocomplete:"password",required:"",type:"password",placeholder:e.$t("pages.login.password.placeholder"),title:e.$t("pages.login.password.title")},null,8,["modelValue","placeholder","title"]),l(S,{to:"/register"},{default:d(()=>[c(o(e.$t("pages.login.registerLink")),1)]),_:1}),l(B,{disabled:!((f=s(t).email)!=null&&f.length)&&!((_=s(t).password)!=null&&_.length)},{default:d(()=>[s(n)?(u(),r(b,{key:0},[c(o(e.$t("pages.login.button.loading")),1)],64)):(u(),r(b,{key:1},[c(o(e.$t("pages.login.button.submit")),1)],64))]),_:1},8,["disabled"]),l(j,{name:"bottom",mode:"out-in"},{default:d(()=>[s(a).status?(u(),r("div",{key:0,class:$([e.$style.info,s(C)])},o(s(v))+" "+o(s(a).details),3)):x("",!0)]),_:1})],34)])}}}),X="_wrapper_1i2oe_10",Y="_info_1i2oe_18",Z={wrapper:X,info:Y,"--success-status":"_--success-status_1i2oe_21","--error-status":"_--error-status_1i2oe_24"},ee={$style:Z},ne=K(R,[["__cssModules",ee]]);export{ne as default};
