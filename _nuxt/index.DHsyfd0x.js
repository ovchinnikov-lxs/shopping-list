import{d as x,a as b,j as y,k as B,l as q,m as z,p as I,u as V,q as j,r as M,s as R,c as m,b as c,n as o,t as f,f as v,v as L,x as p,y as U,F as g,z as F,e as k,h as G,i as d,A as O,B as X,_ as Y}from"./entry.C1iu0HzF.js";import{_ as Q}from"./UiButton.vue.mOlGqhFd.js";import{u as W}from"./asyncData.CMBqvXId.js";const $=q({componentName:"NuxtLinkLocale"}),Z=x({name:"NuxtLinkLocale",props:{...$.props,locale:{type:String,default:void 0,required:!1}},setup(a,{slots:l}){const u=b(),i=y(()=>{const t=a.to??a.href;return t!=null?u(t,a.locale):t}),n=y(()=>{if(a.external||a.target&&a.target!=="_self")return!0;const t=a.to??a.href;return typeof t=="object"?!1:t===""||t==null||z(t,{acceptRelative:!0})}),r=()=>{const t={...a};return n.value||(t.to=i.value),delete t.href,delete t.locale,t};return()=>B($,r(),l.default)}}),H=O(()=>X(()=>import("./TheLoader.D8lZqM_Q.js"),__vite__mapDeps([0,1,2,3]),import.meta.url).then(a=>a.default||a)),J={class:"IndexPage"},K=["onClick"],ee=x({__name:"index",async setup(a){let l,u;const i=I(),n=V(),r=j(),t=b();M({title:()=>r.t("pages.index.title")});const{data:w,pending:N,refresh:A}=([l,u]=R(async()=>W(async()=>{var e;try{if(!((e=n==null?void 0:n.value)!=null&&e.id))return[];const{data:s}=await i.from("Lists").select().eq("user_id",n.value.id);return s}catch(s){return console.error("INDEX_PAGE:USE_LAZY_ASYNC_DATA",s),[]}},"$pqtWcjQkdb")),l=await l,u(),l),h=y(()=>w.value||[]);async function C(){var e;try{if(!((e=n.value)!=null&&e.id))return!1;const s=await i.from("Lists").insert({user_id:n.value.id}).select("id");s.data&&await G(t(`/list/${s.data[0].id}`))}catch(s){console.error("INDEX_PAGE:ON_CREATE:",s)}}async function E(e){await i.from("Lists").delete().eq("id",e),await A()}const P=y(()=>e=>{const s=new Date(e.created_at).toLocaleDateString(r.locale.value,{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"});return`${r.t("pages.index.list.item.title")} - ${s}`});return(e,s)=>{const D=Q,S=H,T=Z;return d(),m("div",J,[c("div",{class:o(e.$style.wrapper)},[c("header",{class:o(e.$style.header)},[c("h3",null,f(e.$t("pages.index.subtitle")),1),v(D,{onClick:C},{default:L(()=>[k(f(e.$t("pages.index.button.add")),1)]),_:1})],2),c("div",{class:o(e.$style.list)},[p(N)?(d(),U(S,{key:0,class:o(e.$style.loader)},null,8,["class"])):p(h).length?(d(!0),m(g,{key:1},F(p(h),_=>(d(),m("div",{key:_.id,class:o(e.$style.item)},[v(T,{to:`/list/${_.id}`,class:o(e.$style.link)},{default:L(()=>[k(f(p(P)(_)),1)]),_:2},1032,["to","class"]),c("div",{class:o(e.$style.delete),onClick:ce=>E(_.id)}," ❌ ",10,K)],2))),128)):(d(),m(g,{key:2},[k(f(e.$t("pages.index.list.empty")),1)],64))],2)],2)])}}}),te="_wrapper_4iokb_10",ae="_header_4iokb_18",se="_list_4iokb_25",ne="_item_4iokb_33",oe="_loader_4iokb_38",le="_link_4iokb_42",ie={wrapper:te,header:ae,list:se,item:ne,loader:oe,link:le,delete:"_delete_4iokb_51"},re={$style:ie},me=Y(ee,[["__cssModules",re]]);export{me as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./TheLoader.D8lZqM_Q.js","./entry.C1iu0HzF.js","./entry.DNMLEd9_.css","./TheLoader.DBFlxvvG.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
