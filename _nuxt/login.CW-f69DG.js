import{m as M,_ as B}from"./UiButton.vue.mOlGqhFd.js";import{d as h,i as l,y as I,S as N,T as P,x as t,p as k,D as L,q as R,r as E,C as G,U as O,j as m,u as q,a as x,w as z,c as d,b as _,t as o,f as i,G as D,v as f,V as W,n as g,E as j,e as A,H,g as F,h as J,W as K,_ as Q}from"./entry.C1iu0HzF.js";const X=h({__name:"UiInput",setup(b){return(n,r)=>(l(),I(t(M),N(P(n.$attrs)),null,16))}}),Y={class:"LoginPage"},Z=h({__name:"login",setup(b){const n=k(),r=K(),y=L(),u=R();E({title:()=>u.t("pages.login.title")});const a=G(""),s=O({status:"",details:""}),$=m(()=>u.t(`pages.login.info.${s.status}`));async function w(){s.details="",s.status="";try{const{error:e}=await n.auth.signInWithOtp({email:a.value,options:{emailRedirectTo:location.origin+r.app.baseURL+"confirm"}});e?(s.details=e.message,s.status="error"):s.status="success"}catch(e){s.status="undefinedError",console.error("LOGIN_PAGE:ON_SUBMIT:",e)}}const v=m(()=>[[y[`--${s.status}-status`]]]),C=q(),S=x();return z(C,async e=>{e&&(await F(),await J(S("/"),{replace:!0}))},{immediate:!0}),(e,c)=>{var p;const T=X,U=B;return l(),d("div",Y,[_("form",{class:g(e.$style.wrapper),onSubmit:j(w,["prevent"])},[_("h3",null,o(e.$t("pages.login.subtitle")),1),i(T,{id:"login-email",modelValue:t(a),"onUpdate:modelValue":c[0]||(c[0]=V=>D(a)?a.value=V:null),maxlength:"255",autocomplete:"email",required:"",type:"email",placeholder:e.$t("pages.login.input.placeholder"),title:e.$t("pages.login.input.title")},null,8,["modelValue","placeholder","title"]),i(U,{disabled:!((p=t(a))!=null&&p.length)},{default:f(()=>[A(o(e.$t("pages.login.button.submit")),1)]),_:1},8,["disabled"]),i(W,{name:"bottom",mode:"out-in"},{default:f(()=>[t(s).status?(l(),d("div",{key:0,class:g([e.$style.info,t(v)])},o(t($))+" "+o(t(s).details),3)):H("",!0)]),_:1})],34)])}}}),ee="_wrapper_1i2oe_10",se="_info_1i2oe_18",te={wrapper:ee,info:se,"--success-status":"_--success-status_1i2oe_21","--error-status":"_--error-status_1i2oe_24"},ae={$style:te},ie=Q(Z,[["__cssModules",ae]]);export{ie as default};
